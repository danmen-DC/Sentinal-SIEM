# Sentinal SIEM
## Objective

The Sentinal SIEM project aimed to establish a controlled environment within Azure for attracting and detecting cyber attacks. The primary focus was to ingest and analyze logs using microsoft Sentinal. The Honeypot gathers test telemetry to mimic real-world attack scenarios. This hands-on experience was designed to deepen understanding of network security, attack patterns, and defensive strategies.

### Skills Learned

- Azure firewall and virtual machine configuration and deployment.
- Proficiency in analyzing and interpreting network logs.
- Ability to generate and recognize attack signatures and patterns.
- Enhanced knowledge of network protocols and security vulnerabilities.
- Development of critical thinking and problem-solving skills in cybersecurity.
- Log Querying and Analysis
   
### Tools Used

- Windows 10 vm
- Azure Cloud services: Powershell, Firewall Manager, Log Analytics Workspace, Microsoft Defender for Cloud
- Microsoft Sentinal
- Telemetry generation script to create realistic network traffic and attack scenarios.

## Steps

Use Azure portal create a Virtual machine and security group: <br/>
<img src="https://i.imgur.com/d24l9xF.png" height="80%" width="80%" alt="Sentinal SIEM Steps"/>
<br />


Define that the security group has all protocols/ports open and is properly labeled with: DANGER_ALL_IN

<img src="https://i.imgur.com/pIMjdDr.png" height="40%" width="40%" alt="Sentinal SIEM Steps"/>
<br />

Navagate to the log analytics to create a workspace. Create custom log to ingested windows event logs.
Custom log will contain geographic information to show where the attack originated from

<img src="https://i.imgur.com/mMySFQ2.png" height="60%" width="60%" alt="Sentinal SIEM Steps"/>
<br />


Add Microsoft Defender for Cloud to the correct subscription and VM
<img src="https://i.imgur.com/3iy8oBF.png" height="80%" width="80%" alt="Sentinal SIEM Steps"/>
<br />

Enable all events

<img src="https://i.imgur.com/VCg3RuY.png" height="80%" width="80%" alt="Sentinal SIEM Steps"/>
<br />

Connect the VM to the custom log created within log analytics 

<img src="https://i.imgur.com/ybFJUGj.png" height="60%" width="60%" alt="Sentinal SIEM Steps"/>
<br />


Connect to honeypot vm. Disable firewall in all profiles

<img src="https://i.imgur.com/q6j7bmC.png" height="30%" width="30%" alt="Sentinal SIEM Steps"/>
<br />

Open powershell ise honeypot add script

<img src="https://i.imgur.com/lsSTQHn.png" height="60%" width="60%" alt="Sentinal SIEM Steps"/>
<br />

Generate api key from geolocation.io add then run persistant script

Create table withing azure portal in log analytics work space. Add sample data generated by script and path to collection path within the honeypot

<img src="https://i.imgur.com/pT7NkjX.png" height="60%" width="60%" alt="Sentinal SIEM Steps"/>
<br />

Add Microsoft Sentinal in the azure portal
In Sentinal add workbook with add query script to select failed rdp attempts with map visualization

<img src="https://i.imgur.com/UTqPUy5.png" height="60%" width="60%" alt="Sentinal SIEM Steps"/>
<br />

Map with IP addresses and lattitude/longitude with number of failed rdp attempts

<img src="https://i.imgur.com/HlPdNrI.png" height="60%" width="60%" alt="Sentinal SIEM Steps"/>
<br />

<img src="https://i.imgur.com/ghNscGX.png" height="60%" width="60%" alt="Sentinal SIEM Steps"/>
<br />
